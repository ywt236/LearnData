### 第一章   平面变换

###### 两个主要领域 

* 计算机图形学
* 计算机辅助设计

###### 几何对象的组成要素：点 直线 曲线 曲面

###### 五种常见的变换：平移，缩放，对称，旋转，仿射

###### 笛卡尔坐标：(a,b)

##### 直线的六种表达形式

* 隐式直线方程：Ax+By+C=0

* 参数方程：x(t)=p1+ t * cosα  y(t)=p2 + t * sinα

* 点斜式：y-y1 = k(x-x1)

* 斜截式：y = kx+b

* 两点式：(y-y1)/(y2-y1)=(x-x1)/(x2-x1)

* 截距式：x/a+y/b=1

##### 直线的方向向量

* 隐式方程：(-B,A) 或 (B,-A)
* 斜率为k的方向向量 (1,k)
* 知两点求方向向量：AB = （x1-x2,y1-y2）

##### 向量平行与垂直

* 平行  x1\*y2 = x2\*y1
* 垂直  x1\*x2+y1\*y2 = 0

##### 线性变换

* L(x,y) = (ax+by+c,dx+ey+f) 
* abcdef 为常数

##### 平移

(x,y) -> (x+h,y+k)

##### 恒等变换

平面上所有的点位置都未变换

##### 逆变换

p'的点变换回p点，记为L^-1

##### 缩放

* (x,y)->(s1x,s2y)

* 当s1,s2相同时，为均匀缩放

* 缩放变换矩阵 p7

##### 对称

关于y轴对称    (x,y)->(-x,y)

关于x轴对称    (x,y)->(x,-y)

##### 关于原点的旋转

(x,y) * (cosa，sina)

​			(-sina，cosa）

##### 点到直线距离

d=|Ax0+By0+C| / (A^2+B^2)^0.5

##### 仿射变换

仿射变换矩阵    p12

P' = P + r\*d\*V

##### 多次连接变换

变换矩阵进行相乘  p14

### 第二章 齐次坐标与平面变换

* 为解决平移变换不能用二维矩阵表示的困难，现在使用3*3矩阵进行变换

* 齐次坐标表示点  (x,y,1) 或(rx,ry,r)

* 笛卡尔坐标转齐次坐标    (x,y)->(x,y,1)

* (x,y,w) { {a,b,c}, {d,e,f}, {g,h,k} }  

* 当g，h为0时，称为仿射变换，仿射变换类似于在笛卡尔平面的变换

* （x,y,0）的齐次坐标代表无穷远点

* 投影平面可以理解为笛卡尔平面与所有无穷远点的集合



##### 齐次坐标下的变换

* 平移矩阵
  
  * （x,y,1)*{{1,0,h}，{0,1,k}，{0,0,1}}
  
* 缩放矩阵
  
  * (x,y,1)*{{s1,0,0},{0,s2,0},{0,0,1}}
  
* 关于原点旋转

  * (x,y,1) * {{cosa,sina,0},{-sina,cosa,0},{0,0,1}}

* 混合的平面变换

  * 矩阵相乘

* 特征变换

  * I*L = L\*I = L

* 逆变换

  * L*L-1 = I

  * 求逆矩阵
    * 根据变换矩阵的含义，如 Rot(a)^-1 = Rot(-a)
    * 矩阵相乘为1 ，列方程求解

* 绕任意点旋转

  * 将旋转点移至原点
  * 旋转
  * 将旋转点移回原来位置

* 关于任意直线对称

  * 将直线移至与原点相交
  * 将直线旋转至与x或y轴重合
  * 关于x或y轴对称
  * 将直线旋转回去
  * 将直线平移回去

* 齐次坐标方程式

  * ax+by+c --> aX+bY+cW=0 (齐次方程坐标)    
  * 已知两个齐次坐标点，求齐次坐标方程
    * （a,b,c）=  (X,Y,W)*(X2,Y2,W2)
  * 已知两个齐次坐标方程，求两直线的交点
    * P = (a,b,c)*(a2,b2,c2)



### 第三章  齐次坐标与空间变换

空间坐标  (x,y,z)    --> (x,y,z,1)

变换矩阵为4*4矩阵，若 m14 m24 m34 为0  m44不为0 ，则为仿射变换

##### 空间变换

* 平移变换
  * {{1,0,0,0},{0,1,0,0},{0,0,1,0},{x1,y1,z1,1}}
* 缩放变换
  * {{sx,0,0,0},{0,sy,0,0},{0,0,sz,0},{0,0,0,sw}}
  * 缩放倍数 x轴 sx/sw  y轴 sy/sw z轴 sz/sw
* 对称变换
  * 关于xy平面对称， Rxy
  * 关于zy平面对称
  * 关于zx平面对称
* 绕坐标轴旋转
  * 关于x坐标轴旋转
  * 关于y坐标轴旋转
  * 关于z坐标轴旋转    p44
  * 适用场合
    * 右手坐标系
    * 站在正方向
    * 逆时针旋转
* 关于任何一条直线旋转
  * 将一条边转至一条轴
  * 将图形进行旋转
  * 逆操作
* 空间直线表示形式
  * 两个三元一次方程的交线
  * 参数形式 t
* 已知三点求平面
  * 
* 已知三平面求交点



#### 第四章    投影和观看管道

三维物体投影到二维平面

##### 平面到线的投影

* 透视投影
  * v 为观察点 p68
  * 变换矩阵的推导如p69所示 
  * 变换矩阵M = LT V - (L·V)I 

* 平行投影
  * 当观察点在无穷远的地点时

##### 三维物体到平面的投影

* 透视投影
  * v为观察点，通过v将物体投影到n平面
  * 变换矩阵    M = nT V  -  (n·v)I4    p72 (生成齐次坐标方程)
* 平行投影
  * 观察点在无穷远时，笛卡尔坐标用齐次坐标表示为  (x,y,z,0）


##### 视平面齐次坐标转换为三维平面坐标

* p'' K = P'
* P'' = P' VC    p77



##### 将坐标剪切渲染至计算机桌面

T(-Xmin,-Ymin)·S()·T(Umin,Vmin)



#### 第五章 曲线

* 曲线的三种表现形式
  * 参数曲线
    * 平面中 C(t) = ( X(t) , Y(t) )    空间中  C(t) = (X(t),Y(t),Z(t))
  * 非参数曲线
    *  y = C(x) 
  * 隐式方程
    * F(x,y) = 0
* 曲线渲染
  * 绘制曲线，最常用的是曲线的参数形式
  * 计算n+1个点的位置，t0 = 开始点  t1 = 结束点
  * Horner's  Method 被用来简化计算，减少乘法次数 
* 曲线的速度
  * v(t) = (x(t)'^2+y(t)'^2)^0.5
  * v(t) 不为 0 ， 规则曲线
  * v(t) 为1 ， 单位速度曲线
* 曲线的切向量
  * C'(t) = ( X(t)' , Y(t)' )
* 曲线单位切向量
* 曲线法向量
  * n(t) = (-Y(t)' , X(t)')
* 曲线弧长
  * 曲线弧长 ： L(C)  =  f v(t) dt    a<=t<=b
* 曲线再参数化
  * C(t) 为规律曲线, s(t) = L(C)为弧长函数 , 则函数 C(s(t))  为单位速度曲线 
* 二次曲线



#### 第六章  贝塞尔曲线 I

* 曲线的两种常用表达形式
  * bezer曲线
  * B-样条曲线
  
* bezer曲线为n次，则由n+1个控制点指定

* 将控制点相连，得到的为控制多边形

* 一次bezer曲线
  * 为一条直线
  * B(t) = (1-t)b0 + tb1
  * t 属于 [0,1]
  
* 二次bezer曲线
  
  * B(t)    p136
  
* 三次bezer曲线
  
  * B(t)    p137
  
* 曲线在起点的切线方向，等于 b0b1 ， 在终点的方向为  bn-1bn

* 一般的bezer曲线
  * B(t)  p141
  * 贝恩斯坦多项式   p141
  * 这里介绍的为网格bezer曲线
  
* 二项式定理
  * C(i,n) x^n-i y^i  的和为  (x+y)^n
  * 多个贝恩斯坦多项式的和为 1 

* 贝恩斯坦多项式的性质
  * 和为1
  * 所有项都大于0
  * 为对称的
  * 为递归的    p144
  
* 凸包性质（CHP）
  
  * 凸包的定义  p144
  
* bezer曲线的性质
  * 端点性质    B(0) = b0    B(1) = b1
  * 端点切线性质 
  * 闭包性质(CHP)：曲线在闭包内
  * 变换下的不变性：对曲线进行仿射变换，等同于将控制点进行变换，再渲染
  * 变差递减特性(VDP)：给定直线与曲线的交点数，少于控制多边形与曲线的交点数

* deCasteljue算法

  * 计算bezer曲线的值
    * 两个公式    p151
    * 对于n阶贝塞尔曲线，B(t) = b(n,0)    b(n,0)的计算公式参考p152
  * 分割贝塞尔曲线定律
    * 选取一个点，左半部分为倒三角形的第一列，右半部分为倒三角形的斜面，以此分割曲线    p155

  

  #### 第七章    空间bezer曲线

  * 点变为空间上的点，满足五条性质，满足deCasteljue算法
  
  * 贝恩斯坦多项式的导数
  
    * 一阶导数：p163
    * 二阶导数：p163
    * 一阶导数的拆解：p163
  
  * 贝塞尔曲线的导数
  
    * p163
  
  * 贝塞尔曲线的二阶导数
  
    * p164
  
  * 其他曲线转换为贝塞尔曲线形式
  
    * n阶的参数曲线方程为：p166
  * 单项控制点：a0 a1 a2
    * 根据贝塞尔展开式计算各个坐标
    
  * 分段贝塞尔曲线
  
    * 高阶贝塞尔曲线不经常使用，而是使用多段的曲线，要求连接处光滑
    * 归一化的贝塞尔曲线：p169



#### 第八章    B-样条曲线

* 一组实数序列：t0 ... tm    m+1个实数
* 内部结点 ， 外部结点  
* 一组控制点    b0~bn
* B-样条基本函数    p188
* B-样条曲线函数的阶数与控制点无关系，通过增加控制点数量，增加曲线自由度
* 结点数等于控制点数加1加阶数
* 结点的值可以相等
* B-样条基函数的性质
  * 大于0
  * t范围外的值为0，局部性
  * 连续的
  * p193
* 开放样条曲线
  * 